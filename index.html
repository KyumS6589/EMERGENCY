<!doctype html>
<html>
<head>
  <title>Emergency WhatsApp Sender</title>
  <style>
    body { font-family: Arial, sans-serif; background: #0f1724; color: #fff; padding: 20px; }
    button { padding: 12px 18px; margin: 8px; border: none; border-radius: 8px; cursor: pointer; }
    .primary { background: #ff4d4f; color: white; }
  </style>
  <script src="server.js"></script>
</head>
<body>
  <h1>ðŸš¨ Emergency WhatsApp Sender</h1>
  <button id="sendBtn" class="primary">Send Emergency Location</button>
  <div id="log"></div>

<script>
function log(msg){
  document.getElementById("log").innerText = msg;
}

document.getElementById("sendBtn").addEventListener("click", () => {
  if (!navigator.geolocation) {
    log("Geolocation not supported.");
    return;
  }
  navigator.geolocation.getCurrentPosition(pos => {
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;
    const mapsUrl = `https://maps.google.com/?q=${lat},${lon}`;
    const message = `ðŸš¨ Emergency! My location: ${mapsUrl}`;
    const phone = "918171388267"; // <-- your WhatsApp number

    // Open WhatsApp Web with prefilled message
    const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
    window.open(url, "_blank");

    log("Opening WhatsApp with your location...");
  }, err => {
    log("Location error: " + err.message);
  });
});
</script>
</body>
</html>
